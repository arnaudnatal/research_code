#--- Introduction
rm(list = ls())
setwd("C:/Users/Arnaud/Documents/GitHub/Analysis/Overindebtedness")
#--- Install packages
# install.packages("tidyr", dependencies = TRUE)
# install.packages("dtwclust", dependencies = TRUE)
# install.packages("dplyr", dependencies = TRUE)
#--- Open packages
library(tidyr)
library(dtwclust)
library(dplyr)
library(ggplot2)
#--- Open datasets
data<-read.csv("debttrend.csv")
attach(data)
#--- Matrices creation
X_loan<-as.matrix(cbind(loanstd1,loanstd2,loanstd3))
X_income<-as.matrix(cbind(incomestd1,incomestd2,incomestd3))
X_assets<-as.matrix(cbind(assetsstd1,assetsstd2,assetsstd3))
X_DSR<-as.matrix(cbind(DSRstd1,DSRstd2,DSRstd3))
X_loan2<-as.matrix(cbind(loan1,loan2,loan3))
X_income2<-as.matrix(cbind(income1,income2,income3))
X_assets2<-as.matrix(cbind(assets1,assetd2,assets3))
X_DSR2<-as.matrix(cbind(DSR1,DSR2,DSR3))
X_expenses<-as.matrix(cbind(expensesstd1,expensesstd2,expensesstd3))
X_DIR<-as.matrix(cbind(DIRstd1,DIRstd2,DIRstd3))
X_DAR<-as.matrix(cbind(DARstd1,DARstd2,DARstd3))
X_ISR<-as.matrix(cbind(ISRstd1,ISRstd2,ISRstd3))
#--- Trends analysis clustering
interactive_clustering(X_loan2)
c_sbd<-dtwclust(X_loan2, type='p', k=L, method = 'average', preproc = zscore, distance = 'dtw', control = list(trace=TRUE) )
interactive_clustering(X_loan2)
View(clust)
View(clust)
hc.clust<-data.frame(panelvar=df.labels, dtwclust=clust@cluster)
# Arnaud NATAL
# University of Bordeaux
# arnaud.natal@u-bordeaux.fr
# Debt trend analysis
# April 28, 2022
#--- Introduction
rm(list = ls())
setwd("C:/Users/Arnaud/Documents/GitHub/Analysis/Overindebtedness")
#--- Install packages
# install.packages("tidyr", dependencies = TRUE)
# install.packages("dtwclust", dependencies = TRUE)
# install.packages("dplyr", dependencies = TRUE)
#--- Open packages
library(tidyr)
library(dtwclust)
library(dplyr)
library(ggplot2)
#--- Open datasets
data<-read.csv("debttrend.csv")
df.labels<-data$panelvar
data$panelvar<-NULL
#attach(data)
attach(data)
X_loan<-as.matrix(cbind(loanstd1,loanstd2,loanstd3))
X_income<-as.matrix(cbind(incomestd1,incomestd2,incomestd3))
X_assets<-as.matrix(cbind(assetsstd1,assetsstd2,assetsstd3))
X_DSR<-as.matrix(cbind(DSRstd1,DSRstd2,DSRstd3))
X_loan2<-as.matrix(cbind(loan1,loan2,loan3))
X_income2<-as.matrix(cbind(income1,income2,income3))
X_assets2<-as.matrix(cbind(assets1,assetd2,assets3))
X_DSR2<-as.matrix(cbind(DSR1,DSR2,DSR3))
X_expenses<-as.matrix(cbind(expensesstd1,expensesstd2,expensesstd3))
X_DIR<-as.matrix(cbind(DIRstd1,DIRstd2,DIRstd3))
X_DAR<-as.matrix(cbind(DARstd1,DARstd2,DARstd3))
X_ISR<-as.matrix(cbind(ISRstd1,ISRstd2,ISRstd3))
interactive_clustering(X_loan2)
hc.clust<-data.frame(panelvar=df.labels, dtwclust=rantestone@cluster)
data<-merge(data,hc.clust, by.x="panelvar", by.y="panelvar")
# Arnaud NATAL
# University of Bordeaux
# arnaud.natal@u-bordeaux.fr
# Debt trend analysis
# April 28, 2022
#--- Introduction
rm(list = ls())
setwd("C:/Users/Arnaud/Documents/GitHub/Analysis/Overindebtedness")
#--- Install packages
# install.packages("tidyr", dependencies = TRUE)
# install.packages("dtwclust", dependencies = TRUE)
# install.packages("dplyr", dependencies = TRUE)
#--- Open packages
library(tidyr)
library(dtwclust)
library(dplyr)
library(ggplot2)
#--- Open datasets
data<-read.csv("debttrend.csv")
df.labels<-data$panelvar
data$panelvar<-NULL
attach(data)
#--- Matrices creation
X_loan<-as.matrix(cbind(loanstd1,loanstd2,loanstd3))
X_income<-as.matrix(cbind(incomestd1,incomestd2,incomestd3))
X_assets<-as.matrix(cbind(assetsstd1,assetsstd2,assetsstd3))
X_DSR<-as.matrix(cbind(DSRstd1,DSRstd2,DSRstd3))
X_loan2<-as.matrix(cbind(loan1,loan2,loan3))
X_income2<-as.matrix(cbind(income1,income2,income3))
X_assets2<-as.matrix(cbind(assets1,assetd2,assets3))
X_DSR2<-as.matrix(cbind(DSR1,DSR2,DSR3))
X_expenses<-as.matrix(cbind(expensesstd1,expensesstd2,expensesstd3))
X_DIR<-as.matrix(cbind(DIRstd1,DIRstd2,DIRstd3))
X_DAR<-as.matrix(cbind(DARstd1,DARstd2,DARstd3))
X_ISR<-as.matrix(cbind(ISRstd1,ISRstd2,ISRstd3))
#--- Trends analysis clustering
interactive_clustering(X_loan2)
#interactive_clustering(X_income)
#interactive_clustering(X_DSR)
add_cluster_to_csv<-cbind(data,cluster)       ### Combine the original dataframe with the vector
# Arnaud NATAL
# University of Bordeaux
# arnaud.natal@u-bordeaux.fr
# Debt trend analysis
# April 28, 2022
#--- Introduction
rm(list = ls())
setwd("C:/Users/Arnaud/Documents/GitHub/Analysis/Overindebtedness")
#--- Install packages
# install.packages("tidyr", dependencies = TRUE)
# install.packages("dtwclust", dependencies = TRUE)
# install.packages("dplyr", dependencies = TRUE)
#--- Open packages
library(tidyr)
library(dtwclust)
library(dplyr)
library(ggplot2)
#--- Open datasets
data<-read.csv("debttrend.csv")
df.labels<-data$panelvar
data$panelvar<-NULL
attach(data)
#--- Matrices creation
X_loan<-as.matrix(cbind(loanstd1,loanstd2,loanstd3))
X_income<-as.matrix(cbind(incomestd1,incomestd2,incomestd3))
X_assets<-as.matrix(cbind(assetsstd1,assetsstd2,assetsstd3))
X_DSR<-as.matrix(cbind(DSRstd1,DSRstd2,DSRstd3))
X_loan2<-as.matrix(cbind(loan1,loan2,loan3))
X_income2<-as.matrix(cbind(income1,income2,income3))
X_assets2<-as.matrix(cbind(assets1,assetd2,assets3))
X_DSR2<-as.matrix(cbind(DSR1,DSR2,DSR3))
X_expenses<-as.matrix(cbind(expensesstd1,expensesstd2,expensesstd3))
X_DIR<-as.matrix(cbind(DIRstd1,DIRstd2,DIRstd3))
X_DAR<-as.matrix(cbind(DARstd1,DARstd2,DARstd3))
X_ISR<-as.matrix(cbind(ISRstd1,ISRstd2,ISRstd3))
#--- Trends analysis clustering
interactive_clustering(X_loan2)
cluster<-rantestone@cluster                   ### Extract the cluster
add_cluster_to_csv<-cbind(data,cluster)       ### Combine the original dataframe with the vector
View(add_cluster_to_csv)
cluster<-rantestone$cluster
# Arnaud NATAL
# University of Bordeaux
# arnaud.natal@u-bordeaux.fr
# Debt trend analysis
# April 28, 2022
#--- Introduction
rm(list = ls())
setwd("C:/Users/Arnaud/Documents/GitHub/Analysis/Overindebtedness")
#--- Install packages
# install.packages("tidyr", dependencies = TRUE)
# install.packages("dtwclust", dependencies = TRUE)
# install.packages("dplyr", dependencies = TRUE)
#--- Open packages
library(tidyr)
library(dtwclust)
library(dplyr)
library(ggplot2)
#--- Open datasets
data<-read.csv("debttrend.csv")
df.labels<-data$panelvar
data$panelvar<-NULL
attach(data)
#--- Matrices creation
X_loan<-as.matrix(cbind(loanstd1,loanstd2,loanstd3))
X_income<-as.matrix(cbind(incomestd1,incomestd2,incomestd3))
X_assets<-as.matrix(cbind(assetsstd1,assetsstd2,assetsstd3))
X_DSR<-as.matrix(cbind(DSRstd1,DSRstd2,DSRstd3))
X_loan2<-as.matrix(cbind(loan1,loan2,loan3))
X_income2<-as.matrix(cbind(income1,income2,income3))
X_assets2<-as.matrix(cbind(assets1,assetd2,assets3))
X_DSR2<-as.matrix(cbind(DSR1,DSR2,DSR3))
X_expenses<-as.matrix(cbind(expensesstd1,expensesstd2,expensesstd3))
X_DIR<-as.matrix(cbind(DIRstd1,DIRstd2,DIRstd3))
X_DAR<-as.matrix(cbind(DARstd1,DARstd2,DARstd3))
X_ISR<-as.matrix(cbind(ISRstd1,ISRstd2,ISRstd3))
#--- Trends analysis clustering
interactive_clustering(X_loan2)
#interactive_clustering(X_income)
#interactive_clustering(X_DSR)
#--- Manual trends analysis for extracting
cluster<-rantestone@cluster
data<-cbind(data,cluster)
cluster<-clustest1@cluster
data<-cbind(data,cluster)
write.csv(data,"debttrendRreturn.csv")
?R.home
R.home()
install.packages('RStata')
library(RStata)
library(RStata)
# Arnaud NATAL
# University of Bordeaux
# arnaud.natal@u-bordeaux.fr
# Debt trend analysis
# April 28, 2022
#--- Introduction
rm(list = ls())
setwd("C:/Users/Arnaud/Documents/GitHub/Analysis/Overindebtedness")
#--- Install packages
# install.packages("tidyr", dependencies = TRUE)
# install.packages("dtwclust", dependencies = TRUE)
# install.packages("dplyr", dependencies = TRUE)
# install.packages('RStata')
#--- Open packages
library(tidyr)
library(dtwclust)
library(dplyr)
library(ggplot2)
library(RStata)
#--- Open datasets
data<-read.csv("debttrend.csv")
df.labels<-data$panelvar
data$panelvar<-NULL
attach(data)
#--- Matrices creation
X_loan<-as.matrix(cbind(loanstd1,loanstd2,loanstd3))
X_income<-as.matrix(cbind(incomestd1,incomestd2,incomestd3))
X_assets<-as.matrix(cbind(assetsstd1,assetsstd2,assetsstd3))
X_DSR<-as.matrix(cbind(DSRstd1,DSRstd2,DSRstd3))
X_loan2<-as.matrix(cbind(loan1,loan2,loan3))
X_income2<-as.matrix(cbind(income1,income2,income3))
X_assets2<-as.matrix(cbind(assets1,assetd2,assets3))
X_DSR2<-as.matrix(cbind(DSR1,DSR2,DSR3))
X_expenses<-as.matrix(cbind(expensesstd1,expensesstd2,expensesstd3))
X_DIR<-as.matrix(cbind(DIRstd1,DIRstd2,DIRstd3))
X_DAR<-as.matrix(cbind(DARstd1,DARstd2,DARstd3))
X_ISR<-as.matrix(cbind(ISRstd1,ISRstd2,ISRstd3))
#--- Trends analysis clustering
interactive_clustering(X_loan2)
#interactive_clustering(X_income)
#interactive_clustering(X_DSR)
#--- Manual trends analysis for extracting
cluster<-clustest1@cluster
data<-cbind(data,cluster)
### Write to new csv:
write.csv(data,"debttrendRreturn.csv")
# Arnaud NATAL
# University of Bordeaux
# arnaud.natal@u-bordeaux.fr
# Debt trend analysis
# April 28, 2022
#--- Introduction
rm(list = ls())
setwd("C:/Users/Arnaud/Documents/GitHub/Analysis/Overindebtedness")
#--- Install packages
# install.packages("tidyr", dependencies = TRUE)
# install.packages("dtwclust", dependencies = TRUE)
# install.packages("dplyr", dependencies = TRUE)
# install.packages('RStata')
#--- Open packages
library(tidyr)
library(dtwclust)
library(dplyr)
library(ggplot2)
library(RStata)
#--- Open datasets
data<-read.csv("debttrend.csv")
df.labels<-data$panelvar
data$panelvar<-NULL
attach(data)
#--- Matrices creation
X_loan<-as.matrix(cbind(loanstd1,loanstd2,loanstd3))
X_income<-as.matrix(cbind(incomestd1,incomestd2,incomestd3))
X_assets<-as.matrix(cbind(assetsstd1,assetsstd2,assetsstd3))
X_DSR<-as.matrix(cbind(DSRstd1,DSRstd2,DSRstd3))
X_loan2<-as.matrix(cbind(loan1,loan2,loan3))
X_income2<-as.matrix(cbind(income1,income2,income3))
X_assets2<-as.matrix(cbind(assets1,assetd2,assets3))
X_DSR2<-as.matrix(cbind(DSR1,DSR2,DSR3))
X_expenses<-as.matrix(cbind(expensesstd1,expensesstd2,expensesstd3))
X_DIR<-as.matrix(cbind(DIRstd1,DIRstd2,DIRstd3))
X_DAR<-as.matrix(cbind(DARstd1,DARstd2,DARstd3))
X_ISR<-as.matrix(cbind(ISRstd1,ISRstd2,ISRstd3))
#--- Trends analysis clustering
interactive_clustering(X_loan2)
#interactive_clustering(X_income)
#interactive_clustering(X_DSR)
#--- Manual trends analysis for extracting
cluster<-clustest1@cluster
data<-cbind(data,cluster)
### Write to new csv:
write.csv(data,"debttrendRreturn.csv")
options("RStata.StataPath" = "C:/Users/Arnaud/Documents/Software/Stata15/StataMP-64")
options("RStata.StataVersion" = 15.1)
stata("forR.do")
stata("forR.do")
stata("forR.do")
cmdgrph<-"
sysuse auto, clear
sum mpg, d
"
stata(command)
stata(cmdgrph)
cmdgrph<-"
import delimited using C:\Users\Arnaud\Documents\GitHub\Analysis\Overindebtedness\debttrendRreturn.csv, clear
keep v1 cluster loan1 loan2 loan3
reshape long loan, i(v1) j(time)
xtset v1 time
sort cluster v1 time
forvalues i=1(1)10 {
set graph off
twoway (line loan time if cluster==`i', c(L) lcolor(red%10)), name(g`i', replace)
graph export C:\Users\Arnaud\Desktop\_graph\g`i'.pdf, as(pdf) replace
set graph on
}
"
stata(cmdgrph)
)
stata(linegraph.do)
stata("linegraph.do")
stata("linegraph.do")
# Arnaud NATAL
# University of Bordeaux
# arnaud.natal@u-bordeaux.fr
# Debt trend analysis
# April 28, 2022
#--- Introduction
rm(list = ls())
setwd("C:/Users/Arnaud/Documents/GitHub/Analysis/Overindebtedness")
#--- Install packages
# install.packages("tidyr", dependencies = TRUE)
# install.packages("dtwclust", dependencies = TRUE)
# install.packages("dplyr", dependencies = TRUE)
# install.packages('RStata')
#--- Open packages
library(tidyr)
library(dtwclust)
library(dplyr)
library(ggplot2)
library(RStata)
#--- Open datasets
data<-read.csv("debttrend.csv")
df.labels<-data$panelvar
data$panelvar<-NULL
attach(data)
#--- Matrices creation
X_loan<-as.matrix(cbind(loanstd1,loanstd2,loanstd3))
X_income<-as.matrix(cbind(incomestd1,incomestd2,incomestd3))
X_assets<-as.matrix(cbind(assetsstd1,assetsstd2,assetsstd3))
X_DSR<-as.matrix(cbind(DSRstd1,DSRstd2,DSRstd3))
X_loan2<-as.matrix(cbind(loan1,loan2,loan3))
X_income2<-as.matrix(cbind(income1,income2,income3))
X_assets2<-as.matrix(cbind(assets1,assetd2,assets3))
X_DSR2<-as.matrix(cbind(DSR1,DSR2,DSR3))
X_expenses<-as.matrix(cbind(expensesstd1,expensesstd2,expensesstd3))
X_DIR<-as.matrix(cbind(DIRstd1,DIRstd2,DIRstd3))
X_DAR<-as.matrix(cbind(DARstd1,DARstd2,DARstd3))
X_ISR<-as.matrix(cbind(ISRstd1,ISRstd2,ISRstd3))
interactive_clustering(X_loan2)
cluster<-clust1@cluster
data<-cbind(data,cluster)
write.csv(data,"debttrendRreturn.csv")
cluster<-clust@cluster
data<-cbind(data,cluster)
write.csv(data,"debttrendRreturn.csv")
options("RStata.StataPath" = "C:/Users/Arnaud/Documents/Software/Stata15/StataMP-64")
options("RStata.StataVersion" = 15.1)
stata("linegraph.do")
interactive_clustering(X_loan2)
test<-tsclust(
series=X_loan2,
type="partitional",
k=6,
distance="sbd",
centroid="shape",
seed=1,
trace=TRUE,
error.check=TRUE
)
plot(test)
# Arnaud NATAL
# University of Bordeaux
# arnaud.natal@u-bordeaux.fr
# Debt trend analysis
# April 28, 2022
#--- Introduction
rm(list = ls())
setwd("C:/Users/Arnaud/Documents/GitHub/Analysis/Overindebtedness")
#--- Install packages
# install.packages("tidyr", dependencies = TRUE)
# install.packages("dtwclust", dependencies = TRUE)
# install.packages("dplyr", dependencies = TRUE)
# install.packages('RStata')
#--- Open packages
library(tidyr)
library(dtwclust)
library(dplyr)
library(ggplot2)
library(RStata)
#--- Open datasets
data<-read.csv("debttrend.csv")
df.labels<-data$panelvar
data$panelvar<-NULL
attach(data)
#--- Matrices creation
X_loan<-as.matrix(cbind(loan1,loan2,loan3))
X_income<-as.matrix(cbind(income1,income2,income3))
X_assets<-as.matrix(cbind(assets1,assetd2,assets3))
X_DSR<-as.matrix(cbind(DSR1,DSR2,DSR3))
X_expenses<-as.matrix(cbind(expenses1,expenses2,expenses3))
X_DIR<-as.matrix(cbind(DIR1,DIR2,DIR3))
X_DAR<-as.matrix(cbind(DAR1,DAR2,DAR3))
X_ISR<-as.matrix(cbind(ISR1,ISR2,ISR3))
#--- Trends analysis clustering
interactive_clustering(X_loan)
View(test)
View(test)
interactive_clustering(X_income)
interactive_clustering(X_DSR)
clsbd<-tsclust(
series=X_loan2,
type="partitional",
k=6,
distance="sbd",
centroid="shape",
seed=1,
trace=TRUE,
error.check=TRUE
)
cldtw<-tsclust(
series=X_loan2,
type="partitional",
k=6,
distance="dtw",
centroid="dba",
seed=1,
trace=TRUE,
error.check=TRUE
)
clsdtw<-tsclust(
series=X_loan2,
type="partitional",
k=6,
distance="sdtw",
centroid="stdw_cent",
seed=1,
trace=TRUE,
error.check=TRUE
)
clsbd<-tsclust(
series=X_loan,
type="partitional",
k=6,
distance="sbd",
centroid="shape",
seed=1,
trace=TRUE,
error.check=TRUE
)
cldtw<-tsclust(
series=X_loan,
type="partitional",
k=6,
distance="dtw",
centroid="dba",
seed=1,
trace=TRUE,
error.check=TRUE
)
clsdtw<-tsclust(
series=X_loan,
type="partitional",
k=6,
distance="sdtw",
centroid="stdw_cent",
seed=1,
trace=TRUE,
error.check=TRUE
)
clsbd<-tsclust(
series=X_loan,
type="partitional",
k=6,
distance="sbd",
centroid="shape",
seed=1,
trace=TRUE,
error.check=TRUE
)
cldtw<-tsclust(
series=X_loan,
type="partitional",
k=6,
distance="dtw",
centroid="dba",
seed=1,
trace=TRUE,
error.check=TRUE
)
clustersbd<-clsbd@cluster
data<-cbind(data,clustersbd)
clusterdtw<-cldtw@cluster
data<-cbind(data,clusterdtw)
write.csv(data,"debttrendRreturn.csv")
options("RStata.StataPath" = "C:/Users/Arnaud/Documents/Software/Stata15/StataMP-64")
options("RStata.StataVersion" = 15.1)
stata("linegraph.do")
stata("linegraph.do")
